# PVE Ubuntu Server 安装脚本使用说明

## 脚本版本说明

本项目包含两个版本的脚本：

### 1. `pve_ubuntu_installer.sh` - 完整版本
- **用途**: 在真实的 PVE 环境中安装 Ubuntu Server
- **要求**: 必须在 PVE 节点上运行，需要 root 权限
- **功能**: 实际创建虚拟机、下载镜像、配置网络等

### 2. `pve_ubuntu_installer_demo.sh` - 演示版本
- **用途**: 在任何环境中测试和演示配置功能
- **要求**: 可以在任何 Linux 系统上运行
- **功能**: 仅演示配置流程，不实际创建虚拟机

## 使用场景

### 完整版本使用场景
```bash
# 在 PVE 节点上运行
sudo ./pve_ubuntu_installer.sh
```

**适用情况:**
- 您有 PVE 环境
- 需要实际安装 Ubuntu Server
- 需要真实的虚拟机功能

### 演示版本使用场景
```bash
# 在任何 Linux 系统上运行
./pve_ubuntu_installer_demo.sh
```

**适用情况:**
- 测试配置功能
- 演示脚本界面
- 学习脚本使用方法
- 在非 PVE 环境中预览功能

## 功能对比

| 功能 | 完整版本 | 演示版本 |
|------|----------|----------|
| 环境检查 | ✅ PVE 环境验证 | ⚠️ 跳过检查 |
| 镜像下载 | ✅ 实际下载 | ⚠️ 模拟下载 |
| 虚拟机创建 | ✅ 实际创建 | ⚠️ 模拟创建 |
| 网络配置 | ✅ 实际配置 | ⚠️ 模拟配置 |
| 菜单界面 | ✅ 完整功能 | ✅ 完整功能 |
| 参数验证 | ✅ 完整验证 | ✅ 完整验证 |
| 配置保存 | ✅ 实际保存 | ✅ 会话保存 |

## 错误解决

### 完整版本常见错误

1. **"此脚本需要在 PVE 节点上运行"**
   ```
   解决: 确保在 PVE 节点上运行脚本
   ```

2. **"qm 命令不可用"**
   ```
   解决: 确保 PVE 工具已正确安装
   ```

3. **权限错误**
   ```
   解决: 使用 sudo 运行脚本
   ```

### 演示版本特点

- ✅ 可以在任何环境中运行
- ✅ 不会产生实际系统变更
- ✅ 适合学习和测试
- ⚠️ 不会实际安装系统

## 配置示例

### 基本配置
```
VM ID: 100
VM 名称: ubuntu-server
内存: 2048MB
CPU 核心数: 2
磁盘大小: 20G
IP 地址: 192.168.1.100
网关: 192.168.1.1
DNS: 8.8.8.8
用户名: ubuntu
密码: your_password
Ubuntu 版本: 22.04
```

### 高性能配置
```
VM ID: 101
VM 名称: u-server
内存: 16384MB
CPU 核心数: 4
磁盘大小: 300G
IP 地址: 10.0.0.3
网关: 10.0.0.1
DNS: 10.0.0.2
用户名: root
密码: biyang1015
Ubuntu 版本: 24.04
```

## 部署建议

### 开发/测试环境
- 使用演示版本进行配置测试
- 验证参数设置是否正确
- 熟悉脚本功能

### 生产环境
- 使用完整版本进行实际部署
- 确保在正确的 PVE 环境中运行
- 备份重要数据

## 脚本选择指南

### 选择完整版本如果：
- ✅ 您有 PVE 环境
- ✅ 需要实际安装系统
- ✅ 有 root 权限
- ✅ 了解 PVE 基本操作

### 选择演示版本如果：
- ✅ 想测试配置功能
- ✅ 在非 PVE 环境中
- ✅ 学习脚本使用方法
- ✅ 演示给其他人看

## 下一步

1. **测试配置**: 使用演示版本测试您的配置
2. **准备环境**: 确保 PVE 环境正确设置
3. **实际部署**: 使用完整版本进行实际安装
4. **连接使用**: 通过 SSH 连接到新创建的虚拟机

## 技术支持

如果遇到问题，请检查：
1. 环境要求是否满足
2. 网络连接是否正常
3. 存储空间是否充足
4. 权限设置是否正确 