# BoomDNS

ä¸€ä¸ªé«˜æ€§èƒ½çš„æ™ºèƒ½ DNS æœåŠ¡å™¨ï¼Œæ”¯æŒæ™ºèƒ½è·¯ç”±ã€å¹¿å‘Šæ‹¦æˆªå’Œæ€§èƒ½ä¼˜åŒ–ã€‚

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº SQLite çš„æ•°æ®å­˜å‚¨ï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡ 10 å€
- ğŸŒ **æ™ºèƒ½è·¯ç”±**: æ”¯æŒä¸­å›½/å›½é™…/å¹¿å‘ŠåŸŸåæ™ºèƒ½åˆ†æµ
- ğŸ›¡ï¸ **å¹¿å‘Šæ‹¦æˆª**: å†…ç½®å¹¿å‘ŠåŸŸåé»‘åå•
- ğŸ“Š **å®æ—¶ç›‘æ§**: è¯¦ç»†çš„æŸ¥è¯¢ç»Ÿè®¡å’Œæ€§èƒ½æŒ‡æ ‡
- ğŸ³ **å®¹å™¨åŒ–**: å®Œæ•´çš„ Docker æ”¯æŒï¼Œé€‚åˆ RouterOS ç­‰å®¹å™¨ç¯å¢ƒ
- ğŸ”„ **è§„åˆ™åŒæ­¥**: æ”¯æŒåœ¨çº¿è§„åˆ™æ›´æ–°

## å¿«é€Ÿå¼€å§‹

### 1. æœ¬åœ°è¿è¡Œ

```bash
# ç¼–è¯‘
go build -o boomdns ./cmd/boomdns

# è¿è¡Œ
./boomdns -config config.yaml
```

### 2. Docker éƒ¨ç½²

```bash
# ä½¿ç”¨éƒ¨ç½²è„šæœ¬
cd deploy
./deploy.sh

# æˆ–æ‰‹åŠ¨æ„å»º
docker build -t boomdns .
docker run -d --name boomdns --network host boomdns
```

### 3. æµ‹è¯•åŠŸèƒ½

```bash
# è¿è¡Œæµ‹è¯•
./test.sh

# æ¼”ç¤ºç¨‹åº
go build -o demo ./cmd/demo
./demo
```

## é…ç½®

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼š

```yaml
# DNS æœåŠ¡é…ç½®
listen_dns: ":53"
listen_http: ":8080"

# ä¸Šæ¸¸ DNS æœåŠ¡å™¨
upstreams:
  china:
    - "223.5.5.5:53"
  intl:
    - "8.8.8.8:53"

# æ•°æ®å­˜å‚¨
persistence:
  enabled: true
  database:
    type: "sqlite"  # æ¨èä½¿ç”¨ SQLite
    sqlite_file: "boomdns.db"
```

## é¡¹ç›®ç»“æ„

```
boomdns/
â”œâ”€â”€ cmd/                    # å‘½ä»¤è¡Œç¨‹åº
â”‚   â”œâ”€â”€ boomdns/           # ä¸»ç¨‹åº
â”‚   â””â”€â”€ demo/              # æ¼”ç¤ºç¨‹åº
â”œâ”€â”€ dns/                   # DNS æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ server.go          # DNS æœåŠ¡å™¨
â”‚   â”œâ”€â”€ sqlite.go          # SQLite æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ storage.go         # å­˜å‚¨æ¥å£
â”‚   â””â”€â”€ config.go          # é…ç½®ç®¡ç†
â”œâ”€â”€ deploy/                # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ Dockerfile         # Docker é•œåƒ
â”‚   â”œâ”€â”€ docker-compose.yml # å®¹å™¨ç¼–æ’
â”‚   â””â”€â”€ deploy.sh          # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ web/                   # Web ç®¡ç†ç•Œé¢
â”œâ”€â”€ admin/                 # ç®¡ç† API
â””â”€â”€ config.yaml            # é…ç½®æ–‡ä»¶
```

## æ€§èƒ½ç‰¹æ€§

- **SQLite å­˜å‚¨**: æ¯”æ–‡ä»¶å­˜å‚¨å¿« 10 å€ä»¥ä¸Š
- **æ™ºèƒ½ç¼“å­˜**: è‡ªåŠ¨ TTL ç®¡ç†å’Œè¿‡æœŸæ¸…ç†
- **å¹¶å‘ä¼˜åŒ–**: æ”¯æŒé«˜å¹¶å‘æŸ¥è¯¢
- **å†…å­˜ä¼˜åŒ–**: å†…å­˜å ç”¨ < 256MB

## éƒ¨ç½²ç¯å¢ƒ

- **RouterOS å®¹å™¨**: âœ… å®Œå…¨æ”¯æŒ
- **Docker**: âœ… å®˜æ–¹æ”¯æŒ
- **Linux**: âœ… åŸç”Ÿæ”¯æŒ
- **Windows**: âœ… è·¨å¹³å°æ”¯æŒ

## æ–‡æ¡£

- [SQLite ä½¿ç”¨è¯´æ˜](SQLITE_README.md)
- [å®ç°æ€»ç»“](SQLITE_IMPLEMENTATION_SUMMARY.md)

## è®¸å¯è¯

MIT License
